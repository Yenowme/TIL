# 컴파일 과정

- preprocessing(전처리) : 헤더(라이브러리)를 코드 안으로 들여보내주는 작업
- compiling(컴파일링) : 프로그래밍 언어를 어셈블리 언어로 변경 한다.
- assembling : 어셈블리 언어를 2진수로 변경.
- linking: 2진수의 상태에서 전처리된 언어들을 모두 합쳐(make) 하나의 out으로 변경.

# 외부 a파일 컴파일하기

### 개념

다른 폴더에 있는 메이크파일을 동작시켜 라이브러리를 만들고, 그 라이브러리를 가져와서 사용하면 되는 단순한 방법

### 순서

1. `make -C ./연결할폴더`
    - make명령어를 실행할 때 -C옵션과 디렉토리 위치를 주면, 해당 파일의 메이크파일을 실행시킨다.
    - 해당 폴더에 라이브러리를 만드는 메이크파일이 필요하다.
2. `cp ./디렉토리/라이브러리 .`
    - 만들어진 라이브러리를 현재 폴더로 복사해준다.
3. `ar rc` ||  `gcc -l -L`
    - 이제 해당 라이브러리를 가지고 링크시켜 컴파일을 진행하거나, 새로운 라이브러리를 생성할 수 있다.

---

### 라이브러리를 링크시켜 컴파일하는법

- `-l`

    링크할 라이브러리를 명시해준다.

    라이브러리 파일의 앞 `lib`와 뒤 `.a`를 떼고 명시해야한다.

    ex) `libft.a` → `-l ft`

- `-L`

    라이브러리의 위치를 명시한다.

---

### 라이브러리에 새 오브젝트를 추가하는 법

ar rc명령어를 사용해서 라이브러리를 만들 때, 기존 생성되어있는 라이브러리에 추가할 object파일을 넣어주면 된다

`ar rc ${기존라이브러리}.a ${추가할파일}.o`
